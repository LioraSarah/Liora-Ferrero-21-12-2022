{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { getCurrentCondition } from '../../api/accuWeatherFuncs';\nexport const loadCurrentCondition = createAsyncThunk('currentCity/loadCurrentCondition', async payload => {\n  if (payload) {\n    const CurrentCondition = await getCurrentCondition(payload);\n    console.log(CurrentCondition[0]);\n    return CurrentCondition[0];\n  }\n});\nconst defaultCity = 'Tel Aviv';\nconst defaultCityKey = '215854';\nconst defaultCityCondition = await loadCurrentCondition({\n  city: defaultCityKey\n});\nexport const currentCitySlice = createSlice({\n  name: 'currentCity',\n  initialState: {\n    CurrentCityName: defaultCity,\n    currentCityKey: defaultCityKey,\n    cityCondition: defaultCityCondition,\n    isLoadingCurrentCondition: false,\n    hasError: false\n  },\n  reducers: {\n    setCurrentCityKey(state, action) {\n      console.log(action.payload);\n      state.currentCityKey = action.payload;\n    },\n    clearCurrentCityKey(state) {\n      state.currentCityKey = '';\n    },\n    setCurrentCityName(state, action) {\n      console.log(action.payload);\n      state.currentCityName = action.payload;\n    },\n    clearCurrentCityName(state) {\n      state.currentCityName = '';\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loadCurrentCondition.pending, state => {\n      state.isLoadingAutocomplete = true;\n      state.hasError = false;\n    }).addCase(loadCurrentCondition.fulfilled, (state, action) => {\n      state.isLoadingAutocomplete = false;\n      state.cityCondition = action.payload;\n    }).addCase(loadCurrentCondition.rejected, state => {\n      state.isLoadingAutocomplete = false;\n      state.hasError = true;\n      state.cityCondition = {};\n    });\n  }\n});\n\n//selectors\nexport const selectCurrentCityKey = state => state.currentCity.currentCityKey;\nexport const selectCurrentCityName = state => state.currentCity.currentCityName;\nexport const isLoading = state => state.currentCity.isLoadingCurrentCondition;\nexport const selectCurrentCondition = state => state.currentCity.cityCondition;\n//actions\nexport const {\n  setCurrentCityKey,\n  clearCurrentCityKey,\n  setCurrentCityName,\n  clearCurrentCityName\n} = currentCitySlice.actions;\n//reducer\nexport default currentCitySlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","getCurrentCondition","loadCurrentCondition","payload","CurrentCondition","console","log","defaultCity","defaultCityKey","defaultCityCondition","city","currentCitySlice","name","initialState","CurrentCityName","currentCityKey","cityCondition","isLoadingCurrentCondition","hasError","reducers","setCurrentCityKey","state","action","clearCurrentCityKey","setCurrentCityName","currentCityName","clearCurrentCityName","extraReducers","builder","addCase","pending","isLoadingAutocomplete","fulfilled","rejected","selectCurrentCityKey","currentCity","selectCurrentCityName","isLoading","selectCurrentCondition","actions","reducer"],"sources":["C:/Users/Liora Ferrero/Documents/Weather App/weather-app/src/features/currentCity/correntCitySlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { getCurrentCondition } from '../../api/accuWeatherFuncs';\r\n\r\nexport const loadCurrentCondition = createAsyncThunk(\r\n  'currentCity/loadCurrentCondition',\r\n  async (payload) => {\r\n    if (payload) {\r\n        const CurrentCondition = await getCurrentCondition(payload);\r\n        console.log(CurrentCondition[0]);\r\n        return CurrentCondition[0];\r\n    }\r\n  }\r\n);\r\n\r\nconst defaultCity = 'Tel Aviv'\r\nconst defaultCityKey = '215854';\r\nconst defaultCityCondition = await loadCurrentCondition({city:defaultCityKey});\r\n\r\nexport const currentCitySlice = createSlice({\r\n    name: 'currentCity',\r\n    initialState: {\r\n      CurrentCityName:  defaultCity,\r\n      currentCityKey: defaultCityKey,\r\n      cityCondition: defaultCityCondition,\r\n      isLoadingCurrentCondition: false,\r\n      hasError: false\r\n    },\r\n    reducers: {\r\n        setCurrentCityKey(state, action) {\r\n          console.log(action.payload);\r\n            state.currentCityKey = action.payload\r\n        },\r\n        clearCurrentCityKey(state) {\r\n            state.currentCityKey = ''\r\n        },\r\n        setCurrentCityName(state, action) {\r\n          console.log(action.payload);\r\n            state.currentCityName = action.payload\r\n        },\r\n        clearCurrentCityName(state) {\r\n            state.currentCityName = ''\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n          .addCase(loadCurrentCondition.pending, (state) => {\r\n            state.isLoadingAutocomplete = true;\r\n            state.hasError = false;\r\n          })\r\n          .addCase(loadCurrentCondition.fulfilled, (state, action) => {\r\n            state.isLoadingAutocomplete = false;\r\n            state.cityCondition = action.payload;\r\n          })\r\n          .addCase(loadCurrentCondition.rejected, (state) => {\r\n            state.isLoadingAutocomplete = false;\r\n            state.hasError = true;\r\n            state.cityCondition = {};\r\n          })\r\n      }\r\n});\r\n\r\n\r\n//selectors\r\nexport const selectCurrentCityKey = (state) => state.currentCity.currentCityKey;\r\nexport const selectCurrentCityName = (state) => state.currentCity.currentCityName;\r\nexport const isLoading = (state) => state.currentCity.isLoadingCurrentCondition;\r\nexport const selectCurrentCondition = (state) => state.currentCity.cityCondition;\r\n//actions\r\nexport const {setCurrentCityKey, clearCurrentCityKey, setCurrentCityName, clearCurrentCityName} = currentCitySlice.actions;\r\n//reducer\r\nexport default currentCitySlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}